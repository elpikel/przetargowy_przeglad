<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content={get_csrf_token()} />
    <title><%= @page_title || "Przetargowy PrzeglÄ…d" %></title>
    <%= if assigns[:page_meta] do %>
      {render_slot(@page_meta)}
    <% end %>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/css/app.css" />
    <script
      defer
      data-domain="przetargowyprzeglad.pl"
      src="https://plausible.przetargowyprzeglad.pl/js/script.hash.outbound-links.tagged-events.js"
    >
    </script>
    <.page_header_styles />
  </head>
  <body>
    <.page_header
      current_user={assigns[:current_user]}
      position={assigns[:header_position] || "sticky"}
      hide_default_cta={assigns[:cta] != nil}
      hide_hamburger={assigns[:hide_hamburger] || false}
    >
      <:nav>
        <%= if assigns[:nav] do %>
          {render_slot(@nav)}
        <% end %>
      </:nav>
      <:cta>
        <%= if assigns[:cta] do %>
          {render_slot(@cta)}
        <% end %>
      </:cta>
    </.page_header>

    <%= if Phoenix.Flash.get(@flash, :info) do %>
      <div class="container" style="padding-top: 24px;">
        <div class="flash flash-info" id="flash-info">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            style="width: 20px; height: 20px; flex-shrink: 0;"
          >
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span><%= Phoenix.Flash.get(@flash, :info) %></span>
        </div>
      </div>
    <% end %>
    <%= if Phoenix.Flash.get(@flash, :error) do %>
      <div class="container" style="padding-top: 24px;">
        <div class="flash flash-error" id="flash-error">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            style="width: 20px; height: 20px; flex-shrink: 0;"
          >
            <path d="M6 18L18 6M6 6l12 12" />
          </svg>
          <span><%= Phoenix.Flash.get(@flash, :error) %></span>
        </div>
      </div>
    <% end %>

    {render_slot(@inner_block)}

    <%= if assigns[:show_footer] != false do %>
      <.page_footer />
    <% end %>

    <.page_header_script />

    <script>
      // Auto-dismiss flash messages
      (function() {
        const flashInfo = document.getElementById('flash-info');
        if (flashInfo) {
          setTimeout(() => {
            flashInfo.style.opacity = '0';
            flashInfo.style.transform = 'translateY(-20px)';
            flashInfo.style.transition = 'all 0.3s ease-out';
            setTimeout(() => {
              flashInfo.remove();
            }, 300);
          }, 5000);
        }
      })();
    </script>
  </body>
</html>
